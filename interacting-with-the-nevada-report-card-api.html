<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>James Estevez | "Interacting with the Nevada Report Card API"</title>
  <meta property="og:type" content="article" />
  <meta name="description" content="NV Report Card Data Last week on the Code for Vegas mailing list, Shawn Looker sent around some data pulled from Nevada Report Card. Because we’ll get the bulk of our data from there, I took a look at what was available. Obviously, not everyone will want to wade ..." />
    <meta property="article:tag" content="[R" />
    <meta property="article:tag" content="web scraping" />
    <meta property="article:tag" content="cflv" />
    <meta property="article:tag" content="civic hacking" />
    <meta property="article:tag" content="education]" />
    <link rel="stylesheet" href="/theme/css/main.css" />
    <link rel="stylesheet" href="/theme/fonts/main.css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
    <link rel="shortcut icon" href="/images/favicon.ico">
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="index" class="home">
    <div id="wrapper">
        <header id="banner" class="body">
            <h1><a href="/">James Estevez</a></h1>
            <br/><nav><ul>
            </ul></nav>
        </header>
<section id="content" class="body">
  <article class="container">
    <header>
      <h1 class="entry-title">"Interacting with the Nevada Report Card API"</h1>
      <span class="date">Tue 04 February 2014</span>
    </header>

    <div class="entry-content">
      <h2>NV Report Card Data</h2>
<p>Last week on the <a href="http://codeforvegas.org">Code for Vegas</a> <a href="https://groups.google.com/d/msg/code-for-vegas/qxoSsnQGPtU/l2zTcEsaC6gJ">mailing list</a>, Shawn Looker sent around some data pulled from <a href="http://www.nevadareportcard.com">Nevada Report Card</a>. Because we’ll get the bulk of our data from there, I took a look at what was available.</p>
<p>Obviously, not everyone will want to wade through an R script, so you can skip to the end for for a <a href="#example">toy example</a>.</p>
<h3>Preliminaries</h3>
<p>We’ll make use of the following libraries in this script:</p>
<p>``` {.code .r .literal-block}
library(RCurl)
library(RJSONIO)
library(plyr)
library(data.table)
library(stringr)
library(knitr)
library(ggmap)</p>
<div class="highlight"><pre><span class="c1">### Getting cohort exam data</span>

Standardized test results are our primary goal. In order to access the data<span class="p">,</span> we’ll need to examine the DI API to determine the most efficient way to proceed.

<span class="c1">#### Getting our bearings</span>

Begin by getting the Organization Hierarchy <span class="kr">in</span> order to get a <span class="kt">list</span> of all schools <span class="kr">in</span> CCSD<span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
org_chart <span class="o">&lt;-</span> getURL<span class="p">(</span><span class="s">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/OrganizationHierarchyTree?organization=64825&quot;</span><span class="p">,</span>
    encoding <span class="o">=</span> <span class="s">&quot;gzip&quot;</span><span class="p">)</span>
org <span class="o">&lt;-</span> fromJSON<span class="p">(</span>org_chart<span class="p">,</span> asText <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>


<h4>Extracting Clark</h4>
<p>We expect that the counties will be at the second node of our tree. Verify:</p>
<p>``` {.code .r .literal-block}
    # Check for counties at the second level
unlist(lapply(org$children, function(x) x$organization$name))</p>
<div class="highlight"><pre>``` {.literal-block}
##  [1] &quot;Churchill&quot;      &quot;Clark&quot;          &quot;Douglas&quot;        &quot;Elko&quot;
##  [5] &quot;Esmeralda&quot;      &quot;Eureka&quot;         &quot;Humboldt&quot;       &quot;Lander&quot;
##  [9] &quot;Lincoln&quot;        &quot;Lyon&quot;           &quot;Mineral&quot;        &quot;Nye&quot;
## [13] &quot;Carson City&quot;    &quot;Pershing&quot;       &quot;Storey&quot;         &quot;Washoe&quot;
## [17] &quot;White Pine&quot;     &quot;State Charters&quot;
</pre></div>


<p>``` {.code .r .literal-block}
    # double checking
org$children[[2]]$organization$name</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;Clark&quot;
</pre></div>


<p>Clark County is our subject. From visual inspection We can infer the meaning of each <code>type</code>:</p>
<p>``` {.code .r .literal-block}
head(unlist(org), n = 10)</p>
<div class="highlight"><pre>``` {.literal-block}
##                 organization.id          organization.parent_id
##                         &quot;64825&quot;                            &quot;-1&quot;
##               organization.code               organization.name
##                            &quot;00&quot;                         &quot;State&quot;
##               organization.type               organization.demo
##                             &quot;S&quot;                         &quot;FALSE&quot;
##               organization.home        children.organization.id
##                          &quot;TRUE&quot;                         &quot;64826&quot;
## children.organization.parent_id      children.organization.code
##                         &quot;64825&quot;                            &quot;01&quot;
</pre></div>


<p>``` {.code .r .literal-block}
tail(unlist(org), n = 10)</p>
<div class="highlight"><pre>``` {.literal-block}
##      children.children.organization.type
##                                      &quot;B&quot;
##      children.children.organization.demo
##                                  &quot;FALSE&quot;
##      children.children.organization.home
##                                  &quot;FALSE&quot;
##        children.children.organization.id
##                                  &quot;65527&quot;
## children.children.organization.parent_id
##                                  &quot;64843&quot;
##      children.children.organization.code
##                                  &quot;18903&quot;
##      children.children.organization.name
##                        &quot;Independence HS&quot;
##      children.children.organization.type
##                                      &quot;B&quot;
##      children.children.organization.demo
##                                  &quot;FALSE&quot;
##      children.children.organization.home
##                                  &quot;FALSE&quot;
</pre></div>


<p>Note the first <code>organization.id</code>, <code>64825</code>, which is the same as our <code>GET</code> request. From the rest we can infer that <code>S</code> = State, <code>D</code> = District, and <code>B</code> = School. We assume that <code>A</code> and <code>C</code> are not used. Checking:</p>
<p>``` {.code .r .literal-block}
table(unlist(org)[grep("organization.type", names(unlist(org)))])</p>
<div class="highlight"><pre>``` {.literal-block}
##
##   B   D   S
## 684  18   1
</pre></div>


<p>Checks out. Now we subset CCSD:</p>
<p>``` {.code .r .literal-block}
clark_org &lt;- org$children[[2]]
unlist(clark_org$organization)</p>
<div class="highlight"><pre>``` {.literal-block}
##        id parent_id      code      name      type      demo      home
##   &quot;64827&quot;   &quot;64825&quot;      &quot;02&quot;   &quot;Clark&quot;       &quot;D&quot;   &quot;FALSE&quot;   &quot;FALSE&quot;
</pre></div>


<p>Finally, we flatten the JSON into a <code>data.table</code></p>
<p>``` {.code .r .literal-block}</p>
<h1>ldply: split list, apply as.data.table, combine into</h1>
<h1>data.frame</h1>
<p>ccsd.DT &lt;- ldply(clark_org$children, function(x) as.data.table(x[1]$organization))
ccsd.DT &lt;- data.table(ccsd.DT, key = c("name", "id"))</p>
<div class="highlight"><pre><span class="c1">#### Extracting subjects</span>

We now have CCSD isolated<span class="p">,</span> we can pull the info <span class="kr">for</span> our Downtown Achieves cohort. This script can be modified <span class="kr">for</span> an arbitrary subset of schools<span class="p">,</span> here we are collecting data <span class="kr">for</span> the following schools<span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
da_list <span class="o">&lt;-</span> <span class="kt">list</span><span class="p">(</span>
    <span class="c1"># concatenate with school level</span>
    da_es_1 <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Hollingsworth&quot;</span><span class="p">,</span> <span class="s">&quot;Crestwood&quot;</span><span class="p">,</span> <span class="s">&quot;Lake&quot;</span><span class="p">,</span> <span class="s">&quot;Park&quot;</span><span class="p">),</span> <span class="s">&quot;ES&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">),</span>
    da_es_2 <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Fyfe&quot;</span> <span class="p">,</span> <span class="s">&quot;McWilliams&quot;</span><span class="p">,</span> <span class="s">&quot;Twin Lakes&quot;</span><span class="p">),</span>  <span class="s">&quot;ES&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">),</span>
    da_ms   <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Fremont&quot;</span><span class="p">,</span> <span class="s">&quot;Gibson (Robert)&quot;</span><span class="p">),</span> <span class="s">&quot;MS&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">),</span>
    da_hs   <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Valley&quot;</span><span class="p">,</span> <span class="s">&quot;Western&quot;</span><span class="p">),</span> <span class="s">&quot;HS&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>


<p>Because we may want to consider each pipeline separately, we also create two character vectors to hold their names:</p>
<p>``` {.code .r .literal-block}
da_pipeline_1 &lt;- c(da_list$da_es_1, da_list$da_ms[1], da_list$da_hs[1])
da_pipeline_2 &lt;- c(da_list$da_es_2, da_list$da_ms[2], da_list$da_hs[2])</p>
<p>da_pipeline_1</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;Hollingsworth ES&quot; &quot;Crestwood ES&quot;     &quot;Lake ES&quot;
## [4] &quot;Park ES&quot;          &quot;Fremont MS&quot;       &quot;Valley HS&quot;
</pre></div>


<p>``` {.code .r .literal-block}
da_pipeline_2</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;Fyfe ES&quot;            &quot;McWilliams ES&quot;      &quot;Twin Lakes ES&quot;
## [4] &quot;Gibson (Robert) MS&quot; &quot;Western HS&quot;
</pre></div>


<p>We’ll select rows from our <code>ccsd.DT</code> data table by passing it our list of names as keys:</p>
<p>``` {.code .r .literal-block}
da.DT &lt;- ccsd.DT[unlist(da_list)]
setkeyv(da.DT, c("name", "id"))</p>
<div class="highlight"><pre><span class="nt">&lt;table&gt;</span>
 <span class="nt">&lt;thead&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>name<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>id<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>parent_id<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>code<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>type<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>demo<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>home<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
 <span class="nt">&lt;/thead&gt;</span>
<span class="nt">&lt;tbody&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Crestwood <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64985
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02205
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Fremont <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>MS<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65088
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02308
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Fyfe <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65020
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02240
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Gibson (Robert) <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>MS<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65090
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02310
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Hollingsworth <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65053
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02273
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Lake <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65017
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02237
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>McWilliams <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64998
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02218
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Park <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64996
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02216
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Twin Lakes <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65023
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02243
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Valley <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>HS<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65147
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02404
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Western <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>HS<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>65148
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64827
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>02405
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>B
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>FALSE<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>

In order to query arbitrary sets of schools we must generate a collection hash:

``` {.code .r .literal-block}
getOrgCollnHash <span class="nt">&lt;-</span> <span class="err">function(ids,</span> <span class="err">hdr,</span> <span class="na">vb =</span> <span class="s">FALSE)</span> <span class="err">{</span>
    <span class="na">r =</span> <span class="s">dynCurlReader()</span>
    <span class="err">ids</span> <span class="err">&lt;-</span> <span class="err">paste0(&quot;=&quot;,</span> <span class="err">paste(ids,</span> <span class="na">collapse =</span> <span class="s">&quot;,&quot;</span><span class="err">))</span>
    <span class="err">curlPerform(</span><span class="na">postfields =</span> <span class="s">ids,</span> <span class="na">url =</span> <span class="s">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/OrganizationCollectionHash&quot;</span><span class="err">,</span>
        <span class="na">verbose =</span> <span class="s">vb,</span> <span class="na">.opts =</span> <span class="s">(httpheader</span> <span class="err">=</span> <span class="err">hdr),</span> <span class="na">post =</span> <span class="s">1L,</span>
        <span class="na">writefunction =</span> <span class="s">r$update)</span>
    <span class="err">paste0(&quot;c&quot;,</span> <span class="err">r$value())</span>
<span class="err">}</span>
</pre></div>


<p>We run this function against our targeted schools and collect the hash for future use:</p>
<p>``` {.code .r .literal-block}
csv_header &lt;- c("Cookie: sid=BCEA0A1BA4249DF33EC03E7A0269DE101FC829462BD8EE8CEBDDF0C46FC9AFFDBD6C1F56D896E3296DEDD9ECE4CFB1E633EBD9D850D7A68126D9B7264653E8CC282DD2CAB5D364513DCF3E71D4481FF3E5D937BFE72E31A1EBECC6733E798322E34B4838A4265E34D3449D6EEFB52C7C24EED7E6484621603BC2F488B1E8C7AC",
    "Accept-Language: en-US,en;q=0.8", "User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36")
rg &lt;- getOrgCollnHash(da.DT$id, csv_header)
rg</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;c4939&quot;
</pre></div>


<h4>Accessing the CSV API</h4>
<p>Inspection of the URL used to download the CRT scores for another group shows:</p>
<p>``` {.code .r .literal-block}
getFormParams("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/summaryCSV?report=summary_1&amp;organization=c2272&amp;scope=e5.g3.y10&amp;scores=N_MA,MA_pass,MA_AMO,MA_level,N_RD,RD_pass,RD_AMO,RD_level")</p>
<div class="highlight"><pre>``` {.literal-block}
##                                                      report
##                                                 &quot;summary_1&quot;
##                                                organization
##                                                     &quot;c2272&quot;
##                                                       scope
##                                                 &quot;e5.g3.y10&quot;
##                                                      scores
## &quot;N_MA,MA_pass,MA_AMO,MA_level,N_RD,RD_pass,RD_AMO,RD_level&quot;
</pre></div>


<p>The <code>organization</code> parameter is the hash generated by <code>getOrgCollnHash()</code>. The <code>scope</code> is constructed from:</p>
<ol>
<li><code>en</code>, where <em>n</em> is 1, 2, 5, or 6,</li>
<li><code>gn</code>, where <em>n</em> is grade number,</li>
<li><code>yn</code>, where <em>n</em> is year post-NCLB, ranging from 1 (2003) to 10 (2012).</li>
</ol>
<p>(These variables, and others, can also be described programmatically via the API)</p>
<p>The set of scores available for each test vary, and will need to be specified for each exam. We hard code them in our retrieval function, but these can easily be edited to narrow the query to specific variables.</p>
<ol>
<li><code>e1</code>, years 3:10; grades 3:8; CRT</li>
<li><code>e2</code>, years 3:10; grade 11; High School Proficiency Exam</li>
<li><code>e5</code>, years 3:10, grades 3:8, 11;NAA</li>
<li><code>e6</code>, years 3:7; grades 3,5; Writing</li>
</ol>
<p>We’ll retrieve each table with the following function:</p>
<p>``` {.code .r .literal-block}
getDiCSV &lt;- function(org, scope, exam, header, ethnicity = FALSE,
    gender = FALSE, iep = FALSE, frl = FALSE, filterdata = NULL,
    rel = "and") {
    # report parameter
    org &lt;- getOrgCollnHash(org, header)
    # scores parameter
    score &lt;- list(e1 = "N_MA,MA_SS,MA_pass,MA_AMO,MA_level,N_RD,RD_SS,RD_pass,RD_AMO,RD_level",
        e2 = "N_MA,MA_SS,MA_pass,MA_AMO,MA_level,N_RD,RD_SS,RD_pass,RD_AMO,RD_level,N_SC,SC_SS,SC_pass,SC_AMO,SC_level,N_WR,WR_pass,WR_AMO,WR_level",
        e5 = "N_MA,MA_pass,MA_AMO,MA_level,N_RD,RD_pass,RD_AMO,RD_level",
        e6 = "N_WR,WR_pass,WR_AMO,WR_level")
    target &lt;- paste0("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/summaryCSV?report=summary_1&amp;organization=",
        org, "&amp;scope=", scope, "&amp;scores=", score[[exam]])</p>
<div class="highlight"><pre><span class="err">#</span> <span class="nx">inelegant</span> <span class="nx">disaggregation</span> <span class="nx">selection</span>
<span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="s2">&quot;&quot;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">ethnicity</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;ethnicity,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">gender</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;gender,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">iep</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;iep,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">frl</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;frl,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>

<span class="err">#</span> <span class="k">if</span> <span class="nx">any</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">above</span><span class="p">,</span> <span class="nx">concatenate</span> <span class="kd">with</span> <span class="nx">target</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">subgroup</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">target</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;&amp;subgroups=&quot;</span><span class="p">,</span> <span class="nx">sub</span><span class="p">(</span><span class="s2">&quot;,$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">),</span> <span class="s2">&quot;&amp;filterrelation=and&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="err">#</span> <span class="nx">filtering</span> <span class="nx">on</span> <span class="nx">subpopulation</span><span class="p">,</span> <span class="nx">but</span> <span class="nx">by</span> <span class="nx">passing</span> <span class="nx">a</span> <span class="nx">string</span>
<span class="err">#</span> <span class="nx">argument</span> <span class="nx">instead</span> <span class="k">if</span> <span class="nx">present</span><span class="p">,</span> <span class="nx">subgroups</span> <span class="nx">above</span> <span class="nx">are</span>
<span class="err">#</span> <span class="nx">ignored</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">is</span><span class="p">.</span><span class="nx">character</span><span class="p">(</span><span class="nx">filterdata</span><span class="p">))</span> <span class="p">{</span>

    <span class="err">#</span> <span class="nx">convert</span> <span class="p">.</span>  <span class="nx">getFilterKeys</span> <span class="o">&lt;-</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filterdatum</span><span class="p">)</span> <span class="p">{</span> <span class="p">.</span>
    <span class="err">#</span> <span class="err">#</span> <span class="nx">split</span> <span class="nx">and</span> <span class="nx">combine</span> <span class="p">.</span>  <span class="nx">filterkey</span> <span class="o">&lt;-</span>
    <span class="err">#</span> <span class="nx">strsplit</span><span class="p">(</span><span class="nx">filterdatum</span><span class="p">,</span> <span class="nx">split</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">.</span>  <span class="nx">paste</span><span class="p">(</span><span class="nx">filterkey</span><span class="p">,</span>
    <span class="err">#</span> <span class="nx">collapse</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="p">.</span>  <span class="p">}</span>
    <span class="nx">filterkeys</span> <span class="o">&lt;-</span> <span class="nx">gsub</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="nx">filterdata</span><span class="p">,</span> <span class="nx">exact</span> <span class="o">=</span> <span class="nx">TRUE</span><span class="p">)</span>

    <span class="nx">target</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;&amp;filterkey=&quot;</span><span class="p">,</span> <span class="nx">filterkeys</span><span class="p">,</span>
        <span class="s2">&quot;&amp;filterdata=&quot;</span><span class="p">,</span> <span class="nx">filterdata</span><span class="p">,</span> <span class="s2">&quot;&amp;filterrelation=&quot;</span><span class="p">,</span>
        <span class="nx">rel</span><span class="p">)</span>
<span class="p">}</span>
<span class="err">#</span> <span class="nx">target</span> <span class="nx">make</span> <span class="nx">it</span> <span class="nx">so</span>
<span class="nx">resultsText</span> <span class="o">&lt;-</span> <span class="nx">getURL</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span>

<span class="err">#</span> <span class="nx">create</span> <span class="nx">temporary</span> <span class="nx">connection</span> <span class="nx">from</span> <span class="nx">results</span> <span class="nx">and</span> <span class="k">return</span>
<span class="err">#</span> <span class="nx">data</span><span class="p">.</span><span class="nx">table</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">read</span><span class="p">.</span><span class="nx">csv</span><span class="p">(</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">resultsText</span><span class="p">))</span>
</pre></div>


<p>}</p>
<div class="highlight"><pre>Now we’ll download the results of the Criterion Referenced Test <span class="p">(</span>exam <span class="sb">`e1`</span><span class="p">)</span> <span class="kr">for</span> Grade <span class="m">3</span> <span class="p">(</span><span class="sb">`g3`</span><span class="p">),</span> and years <span class="m">2007</span> <span class="p">(</span><span class="sb">`y3`</span><span class="p">)</span> through <span class="m">2012</span> <span class="p">(</span><span class="sb">`y10`</span><span class="p">)</span><span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
scopestr <span class="o">&lt;-</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;e1&quot;</span><span class="p">,</span> <span class="s">&quot;g3&quot;</span><span class="p">,</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">10</span><span class="p">)),</span> collapse <span class="o">=</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
da.crt.g3 <span class="o">&lt;-</span> getDiCSV<span class="p">(</span>da.DT<span class="o">$</span>id<span class="p">,</span> scopestr<span class="p">,</span> <span class="s">&quot;e1&quot;</span><span class="p">,</span> csv_header<span class="p">)</span>
</pre></div>


<p>Printing the first six rows:</p>
<table id="da_table">
 <thead>
  <tr>
   <th><p>Group</p>
</th>
   <th><p>Year</p>
</th>
   <th><p>Grade</p>
</th>
   <th><p>Number.Enrolled</p>
</th>
   <th><p>Mathematics…Number.Tested</p>
</th>
   <th><p>Mathematics…Mean.Scale.Score</p>
</th>
   <th><p>Mathematics…..Proficient</p>
</th>
   <th><p>Mathematics…..Above.<span class="caps">AMO</span></p>
</th>
   <th><p>Mathematics…Emergent.Developing</p>
</th>
   <th><p>Mathematics…Approaches.Standard</p>
</th>
   <th><p>Mathematics…Meets.Standard</p>
</th>
   <th><p>Mathematics…Exceeds.Standard</p>
</th>
   <th><p>Reading…Number.Tested</p>
</th>
   <th><p>Reading…Mean.Scale.Score</p>
</th>
   <th><p>Reading…..Proficient</p>
</th>
   <th><p>Reading…..Above.<span class="caps">AMO</span></p>
</th>
   <th><p>Reading…Emergent.Developing</p>
</th>
   <th><p>Reading…Approaches.Standard</p>
</th>
   <th><p>Reading…Meets.Standard</p>
</th>
   <th><p>Reading…Exceeds.Standard</p>
</th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td>Crestwood <span class="caps">ES</span>
</td>
   <td>2007-2008
</td>
   <td>3
</td>
   <td>126
</td>
   <td>126
</td>
   <td>316.8
</td>
   <td>64.3
</td>
   <td>8.0
</td>
   <td>7.1
</td>
   <td>28.6
</td>
   <td>35.7
</td>
   <td>28.6
</td>
   <td>126
</td>
   <td>298.0
</td>
   <td>54.0
</td>
   <td>2.3
</td>
   <td>8.7
</td>
   <td>37.3
</td>
   <td>29.4
</td>
   <td>24.6
</td>
  </tr>
  <tr>
   <td>Crestwood <span class="caps">ES</span>
</td>
   <td>2008-2009
</td>
   <td>3
</td>
   <td>114
</td>
   <td>114
</td>
   <td>312.0
</td>
   <td>52.6
</td>
   <td>-3.7
</td>
   <td>6.1
</td>
   <td>41.2
</td>
   <td>23.7
</td>
   <td>28.9
</td>
   <td>114
</td>
   <td>302.4
</td>
   <td>57.0
</td>
   <td>5.3
</td>
   <td>4.4
</td>
   <td>38.6
</td>
   <td>40.4
</td>
   <td>16.7
</td>
  </tr>
  <tr>
   <td>Crestwood <span class="caps">ES</span>
</td>
   <td>2009-2010
</td>
   <td>3
</td>
   <td>108
</td>
   <td>108
</td>
   <td>305.0
</td>
   <td>53.7
</td>
   <td>-12.2
</td>
   <td>16.7
</td>
   <td>29.6
</td>
   <td>32.4
</td>
   <td>21.3
</td>
   <td>108
</td>
   <td>296.1
</td>
   <td>50.0
</td>
   <td>-13.8
</td>
   <td>4.6
</td>
   <td>45.4
</td>
   <td>34.3
</td>
   <td>15.7
</td>
  </tr>
  <tr>
   <td>Crestwood <span class="caps">ES</span>
</td>
   <td>2010-2011
</td>
   <td>3
</td>
   <td>112
</td>
   <td>112
</td>
   <td>345.1
</td>
   <td>80.4
</td>
   <td>14.5
</td>
   <td>9.8
</td>
   <td>9.8
</td>
   <td>37.5
</td>
   <td>42.9
</td>
   <td>112
</td>
   <td>301.0
</td>
   <td>57.1
</td>
   <td>-6.7
</td>
   <td>25.0
</td>
   <td>17.9
</td>
   <td>36.6
</td>
   <td>20.5
</td>
  </tr>
  <tr>
   <td>Crestwood <span class="caps">ES</span>
</td>
   <td>2011-2012
</td>
   <td>3
</td>
   <td>120
</td>
   <td>120
</td>
   <td>322.4
</td>
   <td>70.8
</td>
   <td>-2.7
</td>
   <td>8.3
</td>
   <td>20.8
</td>
   <td>42.5
</td>
   <td>28.3
</td>
   <td>120
</td>
   <td>294.1
</td>
   <td>48.3
</td>
   <td>-17.5
</td>
   <td>20.8
</td>
   <td>30.8
</td>
   <td>34.2
</td>
   <td>14.2
</td>
  </tr>
  <tr>
   <td>Crestwood <span class="caps">ES</span>
</td>
   <td>2012-2013
</td>
   <td>3
</td>
   <td>104
</td>
   <td>104
</td>
   <td>314.3
</td>
   <td>57.7
</td>
   <td>-13.9
</td>
   <td>14.4
</td>
   <td>27.9
</td>
   <td>29.8
</td>
   <td>27.9
</td>
   <td>104
</td>
   <td>289.0
</td>
   <td>41.3
</td>
   <td>-26.1
</td>
   <td>30.8
</td>
   <td>27.9
</td>
   <td>24.0
</td>
   <td>17.3
</td>
  </tr>
</tbody>
</table>

<p>Try again, but this time disaggregate based upon ethnicity:</p>
<p>``` {.code .r .literal-block}
da.crt.g3.e &lt;- getDiCSV(da.DT$id, scopestr, "e1", csv_header,
    ethnicity = TRUE)</p>
<div class="highlight"><pre>The first six rows:

<span class="nt">&lt;table&gt;</span>
 <span class="nt">&lt;thead&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Group<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Year<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Grade<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Number.Enrolled<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…Number.Tested<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…Mean.Scale.Score<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…..Proficient<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…..Above.<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>AMO<span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…Emergent.Developing<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…Approaches.Standard<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…Meets.Standard<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Mathematics…Exceeds.Standard<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…Number.Tested<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…Mean.Scale.Score<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…..Proficient<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…..Above.<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>AMO<span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…Emergent.Developing<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…Approaches.Standard<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…Meets.Standard<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
   <span class="nt">&lt;th&gt;&lt;p&gt;</span>Reading…Exceeds.Standard<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/th&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
 <span class="nt">&lt;/thead&gt;</span>
<span class="nt">&lt;tbody&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Crestwood <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2007-2008
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>126
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>126
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>316.8
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>64.3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>8.0
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>7.1
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>28.6
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>35.7
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>28.6
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>126
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>298.0
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>54.0
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2.3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>8.7
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>37.3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>29.4
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>24.6
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Black
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2007-2008
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Hispanic
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2007-2008
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>105
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>105
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>312.8
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>61.9
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>5.6
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>7.6
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>30.5
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>38.1
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>23.8
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>105
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>292.4
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>50.5
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>-1.2
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>9.5
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>40.0
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>29.5
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>21.0
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>White
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2007-2008
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;</span>Asian
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2007-2008
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;&lt;div</span> <span class="na">class=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;&lt;p&gt;</span>Crestwood
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;caps&quot;</span><span class="nt">&gt;</span>ES<span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>2008-2009
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>114
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>114
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>312.0
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>52.6
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>-3.7
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>6.1
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>41.2
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>23.7
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>28.9
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>114
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>302.4
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>57.0
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>5.3
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>4.4
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>38.6
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>40.4
<span class="nt">&lt;/td&gt;</span>
   <span class="nt">&lt;td&gt;</span>16.7
<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>

As we can see, disaggregation has its pitfalls: test results are suppressed for any group where *n*≤20.

From here, one can filter for complete cases, reshape data, tabulate, etc. Next, an overview of the non-assessment data on NRC.

### Getting NRC data

#### Accessing demographic and profile data

Test scores alone are of limited value. Additional context is provided by several addditional datasets on NRC.

##### Adequate Yearly Progress

``` {.code .r .literal-block}
all.ccsd.ayp.csv.txt <span class="nt">&lt;-</span> <span class="err">getURL(&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?</span><span class="na">report=</span><span class="s">reportcard_1&amp;organization=c5376&amp;scope=e13.y1.y2.y3.y4.y5.y6.y7.y8.y9&amp;scores=852,853,854&quot;)</span>
<span class="err">ccsd.ayp.DT</span> <span class="err">&lt;-</span> <span class="err">data.table(read.csv(</span><span class="na">text =</span> <span class="s">all.ccsd.ayp.csv.txt))</span>
</pre></div>


<h5>Demographics</h5>
<p>Download all count and percentage demographic data:</p>
<p>``` {.code .r .literal-block}
all.ccsd.demo.csv.txt &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e7.y1.y10.y2.y4.y5.y6.y7.y8.y9&amp;scores=1026,566,567,568,569,570,571,572,573,574,575,805,576,577,806,586,587,588,589,578,579,580,581,582,583,584,585")
ccsd.demo.DT &lt;- data.table(read.csv(text = all.ccsd.demo.csv.txt))</p>
<div class="highlight"><pre><span class="c1">##### Personnel</span>

Download all personnel data <span class="p">(</span>e.g.<span class="p">,</span> % of highly qualified teachers<span class="p">)</span><span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
all.ccsd.pers.csv.txt <span class="o">&lt;-</span> getURL<span class="p">(</span><span class="s">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e12.y1.y10.y2.y4.y5.y6.y7.y8.y9&amp;scores=779,780,781,782,851,783,784,785,786,787,788,789,790,791,792,793,795,796,1029,797,798,799,800,801,802,803,760,761,762,856,763,765,767,769,771,764,766,768,770,772,775,773,777,776,774,778&quot;</span><span class="p">)</span>
ccsd.pers.DT <span class="o">&lt;-</span> data.table<span class="p">(</span>read.csv<span class="p">(</span>text <span class="o">=</span> all.ccsd.pers.csv.txt<span class="p">))</span>
</pre></div>


<h5>Technology</h5>
<p>Download all Technology data:</p>
<p>``` {.code .r .literal-block}
ccsd.tech2011.csv &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e17.y1.y2.y3.y4.y5.y6&amp;scores=590,591,592,593,594,595")
ccsd.tech2012.csv &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e8.y10.y7&amp;scores=809,810,811,812,813,814,815")
ccsd.tech.DT &lt;- data.table(rbind.fill(read.csv(text = ccsd.tech2011.csv),
    read.csv(text = ccsd.tech2012.csv)))</p>
<div class="highlight"><pre><span class="err">####</span> <span class="nx">Historical</span> <span class="nx">profiles</span>

<span class="nx">Historical</span> <span class="nx">profiles</span> <span class="nx">are</span> <span class="nx">analogous</span> <span class="nx">to</span> <span class="nx">metadata</span> <span class="k">for</span> <span class="nx">each</span> <span class="nx">school</span> <span class="nx">year</span><span class="p">.</span> <span class="nx">These</span> <span class="nx">include</span> <span class="nx">the</span> <span class="nx">name</span> <span class="nx">of</span> <span class="nx">each</span> <span class="nx">school</span><span class="err">’</span><span class="nx">s</span> <span class="nx">principal</span><span class="p">,</span> <span class="nx">addresses</span><span class="p">,</span> <span class="nx">phone</span> <span class="nx">numbers</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">names</span> <span class="nx">of</span> <span class="nx">school</span> <span class="nx">board</span> <span class="nx">members</span> <span class="nx">and</span> <span class="nx">more</span><span class="p">.</span> <span class="nx">Also</span> <span class="nx">included</span> <span class="nx">are</span> <span class="nx">goals</span><span class="p">,</span> <span class="nx">such</span> <span class="nx">as</span> <span class="nx">the</span> <span class="s2">&quot;percent</span><span class="cp">[</span><span class="nx">age</span><span class="cp">]</span><span class="s2"> of non-proficient math students in the Class of 2006 will be reduced by at least 50%.&quot;</span> <span class="p">(</span><span class="cp">[</span><span class="nx">Advanced</span> <span class="nx">Technologies</span> <span class="nx">Academy</span><span class="cp">]</span><span class="p">(</span><span class="nx">http</span><span class="o">:</span><span class="c1">//www.atech.org/), 2005)</span>

<span class="err">```</span> <span class="p">{.</span><span class="nx">code</span> <span class="p">.</span><span class="nx">r</span> <span class="p">.</span><span class="nx">literal</span><span class="o">-</span><span class="nx">block</span><span class="p">}</span>
<span class="nx">getProfiles</span> <span class="o">&lt;-</span> <span class="kd">function</span><span class="p">(</span><span class="nx">org</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">years</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">)</span>

    <span class="err">#</span> <span class="nx">Create</span> <span class="nx">a</span> <span class="nx">list</span> <span class="nx">of</span> <span class="nx">lists</span> <span class="nx">containing</span> <span class="nx">searches</span> <span class="k">for</span> <span class="nx">each</span>
    <span class="err">#</span> <span class="nx">year</span>
    <span class="nx">searches</span> <span class="o">&lt;-</span> <span class="nx">lapply</span><span class="p">(</span><span class="nx">years</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nx">structure</span><span class="p">(</span><span class="nx">c</span><span class="p">(</span><span class="s2">&quot;profile_1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">org</span><span class="p">),</span> <span class="p">.</span><span class="nx">Names</span> <span class="o">=</span> <span class="nx">c</span><span class="p">(</span><span class="s2">&quot;report&quot;</span><span class="p">,</span> <span class="s2">&quot;reportID&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot;organization&quot;</span><span class="p">)))</span>
    <span class="nx">prof</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">lst</span> <span class="o">&lt;-</span> <span class="nx">lapply</span><span class="p">(</span><span class="nx">searches</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">search</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">getForm</span><span class="p">(</span><span class="s2">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/Profile&quot;</span><span class="p">,</span>
            <span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">search</span><span class="p">,</span> <span class="p">.</span><span class="nx">opts</span> <span class="o">=</span> <span class="p">(</span><span class="nx">httpheader</span> <span class="o">=</span> <span class="s2">&quot;Accept: application/json, text/javascript, */*; q=0.01&quot;</span><span class="p">))</span>
    <span class="p">})</span>
    <span class="nx">prof</span><span class="p">.</span><span class="nx">list</span> <span class="o">&lt;-</span> <span class="nx">lapply</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">lst</span><span class="p">,</span> <span class="nx">fromJSON</span><span class="p">)</span>
    <span class="nx">names</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">list</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nx">years</span>
    <span class="nx">prof</span><span class="p">.</span><span class="nx">list</span>
<span class="p">}</span>
</pre></div>


<h3>Example</h3>
<p>This is already far too long, but I want to shoehorn in a few applications. We’ll download the profiles of Valley High School, one of our DA schools:</p>
<p>``` {.code .r .literal-block}
valley.prof.list &lt;- getProfiles(da.DT["Valley HS"]$id)</p>
<div class="highlight"><pre><span class="gh">NV Report Card Data</span>
<span class="gh">-------------------</span>

Last week, Shawn Looker sent around some data pulled from [Nevada Report Card](http://www.nevadareportcard.com). Because we’ll get the bulk of our data from there, I took a look at what was available.

Obviously, not everyone will want to wade through an R script, so you can skip to the end for for a toy example.

### Preliminaries

We’ll make use of the following libraries in this script:

<span class="s">``` {.code .r .literal-block}</span>
<span class="s">library(RCurl)</span>
<span class="s">library(RJSONIO)</span>
<span class="s">library(plyr)</span>
<span class="s">library(data.table)</span>
<span class="s">library(stringr)</span>
<span class="s">library(knitr)</span>
<span class="s">library(ggmap)</span>
</pre></div>


<h3>Getting cohort exam data</h3>
<p>Standardized test results are our primary goal. In order to access the data, we’ll need to examine the DI API to determine the most efficient way to proceed.</p>
<h4>Getting our bearings</h4>
<p>Begin by getting the Organization Hierarchy in order to get a list of all schools in CCSD:</p>
<p>``` {.code .r .literal-block}
org_chart &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/OrganizationHierarchyTree?organization=64825",
    encoding = "gzip")
org &lt;- fromJSON(org_chart, asText = TRUE)</p>
<div class="highlight"><pre><span class="err">####</span> <span class="nx">Extracting</span> <span class="nx">Clark</span>

<span class="nx">We</span> <span class="nx">expect</span> <span class="nx">that</span> <span class="nx">the</span> <span class="nx">counties</span> <span class="nx">will</span> <span class="nx">be</span> <span class="nx">at</span> <span class="nx">the</span> <span class="nx">second</span> <span class="nx">node</span> <span class="nx">of</span> <span class="nx">our</span> <span class="nx">tree</span><span class="p">.</span> <span class="nx">Verify</span><span class="o">:</span>

<span class="err">```</span> <span class="p">{.</span><span class="nx">code</span> <span class="p">.</span><span class="nx">r</span> <span class="p">.</span><span class="nx">literal</span><span class="o">-</span><span class="nx">block</span><span class="p">}</span>
<span class="err">#</span> <span class="nx">Check</span> <span class="k">for</span> <span class="nx">counties</span> <span class="nx">at</span> <span class="nx">the</span> <span class="nx">second</span> <span class="nx">level</span>
<span class="nx">unlist</span><span class="p">(</span><span class="nx">lapply</span><span class="p">(</span><span class="nx">org$children</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nx">x$organization$name</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>##  [1] &quot;Churchill&quot;      &quot;Clark&quot;          &quot;Douglas&quot;        &quot;Elko&quot;
##  [5] &quot;Esmeralda&quot;      &quot;Eureka&quot;         &quot;Humboldt&quot;       &quot;Lander&quot;
##  [9] &quot;Lincoln&quot;        &quot;Lyon&quot;           &quot;Mineral&quot;        &quot;Nye&quot;
## [13] &quot;Carson City&quot;    &quot;Pershing&quot;       &quot;Storey&quot;         &quot;Washoe&quot;
## [17] &quot;White Pine&quot;     &quot;State Charters&quot;
</pre></div>


<p>``` {.code .r .literal-block}</p>
<h1>double checking</h1>
<p>org$children[[2]]$organization$name</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;Clark&quot;
</pre></div>


<p>Clark County is our subject. From visual inspection We can infer the meaning of each <code>type</code>:</p>
<p>``` {.code .r .literal-block}
head(unlist(org), n = 10)</p>
<div class="highlight"><pre>``` {.literal-block}
##                 organization.id          organization.parent_id
##                         &quot;64825&quot;                            &quot;-1&quot;
##               organization.code               organization.name
##                            &quot;00&quot;                         &quot;State&quot;
##               organization.type               organization.demo
##                             &quot;S&quot;                         &quot;FALSE&quot;
##               organization.home        children.organization.id
##                          &quot;TRUE&quot;                         &quot;64826&quot;
## children.organization.parent_id      children.organization.code
##                         &quot;64825&quot;                            &quot;01&quot;
</pre></div>


<p>``` {.code .r .literal-block}
tail(unlist(org), n = 10)</p>
<div class="highlight"><pre>``` {.literal-block}
##      children.children.organization.type
##                                      &quot;B&quot;
##      children.children.organization.demo
##                                  &quot;FALSE&quot;
##      children.children.organization.home
##                                  &quot;FALSE&quot;
##        children.children.organization.id
##                                  &quot;65527&quot;
## children.children.organization.parent_id
##                                  &quot;64843&quot;
##      children.children.organization.code
##                                  &quot;18903&quot;
##      children.children.organization.name
##                        &quot;Independence HS&quot;
##      children.children.organization.type
##                                      &quot;B&quot;
##      children.children.organization.demo
##                                  &quot;FALSE&quot;
##      children.children.organization.home
##                                  &quot;FALSE&quot;
</pre></div>


<p>Note the first <code>organization.id</code>, <code>64825</code>, which is the same as our <code>GET</code> request. From the rest we can infer that <code>S</code> = State, <code>D</code> = District, and <code>B</code> = School. We assume that <code>A</code> and <code>C</code> are not used. Checking:</p>
<p>``` {.code .r .literal-block}
table(unlist(org)[grep("organization.type", names(unlist(org)))])</p>
<div class="highlight"><pre>``` {.literal-block}
##
##   B   D   S
## 684  18   1
</pre></div>


<p>Checks out. Now we subset CCSD:</p>
<p>``` {.code .r .literal-block}
clark_org &lt;- org$children[[2]]
unlist(clark_org$organization)</p>
<div class="highlight"><pre>``` {.literal-block}
##        id parent_id      code      name      type      demo      home
##   &quot;64827&quot;   &quot;64825&quot;      &quot;02&quot;   &quot;Clark&quot;       &quot;D&quot;   &quot;FALSE&quot;   &quot;FALSE&quot;
</pre></div>


<p>Finally, we flatten the JSON into a <code>data.table</code></p>
<p>``` {.code .r .literal-block}</p>
<h1>ldply: split list, apply as.data.table, combine into</h1>
<h1>data.frame</h1>
<p>ccsd.DT &lt;- ldply(clark_org$children, function(x) as.data.table(x[1]$organization))
ccsd.DT &lt;- data.table(ccsd.DT, key = c("name", "id"))</p>
<div class="highlight"><pre><span class="c1">#### Extracting subjects</span>

We now have CCSD isolated<span class="p">,</span> we can pull the info <span class="kr">for</span> our Downtown Achieves cohort. This script can be modified <span class="kr">for</span> an arbitrary subset of schools<span class="p">,</span> here we are collecting data <span class="kr">for</span> the following schools<span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
da_list <span class="o">&lt;-</span> <span class="kt">list</span><span class="p">(</span>
    <span class="c1"># concatenate with school level</span>
    da_es_1 <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Hollingsworth&quot;</span><span class="p">,</span> <span class="s">&quot;Crestwood&quot;</span><span class="p">,</span> <span class="s">&quot;Lake&quot;</span><span class="p">,</span> <span class="s">&quot;Park&quot;</span><span class="p">),</span> <span class="s">&quot;ES&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">),</span>
    da_es_2 <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Fyfe&quot;</span> <span class="p">,</span> <span class="s">&quot;McWilliams&quot;</span><span class="p">,</span> <span class="s">&quot;Twin Lakes&quot;</span><span class="p">),</span>  <span class="s">&quot;ES&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">),</span>
    da_ms   <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Fremont&quot;</span><span class="p">,</span> <span class="s">&quot;Gibson (Robert)&quot;</span><span class="p">),</span> <span class="s">&quot;MS&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">),</span>
    da_hs   <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;Valley&quot;</span><span class="p">,</span> <span class="s">&quot;Western&quot;</span><span class="p">),</span> <span class="s">&quot;HS&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>


<p>Because we may want to consider each pipeline separately, we also create two character vectors to hold their names:</p>
<p>``` {.code .r .literal-block}
da_pipeline_1 &lt;- c(da_list$da_es_1, da_list$da_ms[1], da_list$da_hs[1])
da_pipeline_2 &lt;- c(da_list$da_es_2, da_list$da_ms[2], da_list$da_hs[2])</p>
<p>da_pipeline_1</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;Hollingsworth ES&quot; &quot;Crestwood ES&quot;     &quot;Lake ES&quot;
## [4] &quot;Park ES&quot;          &quot;Fremont MS&quot;       &quot;Valley HS&quot;
</pre></div>


<p>``` {.code .r .literal-block}
da_pipeline_2</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;Fyfe ES&quot;            &quot;McWilliams ES&quot;      &quot;Twin Lakes ES&quot;
## [4] &quot;Gibson (Robert) MS&quot; &quot;Western HS&quot;
</pre></div>


<p>We’ll select rows from our <code>ccsd.DT</code> data table by passing it our list of names as keys:</p>
<p>``` {.code .r .literal-block}
da.DT &lt;- ccsd.DT[unlist(da_list)]
setkeyv(da.DT, c("name", "id"))</p>
<div class="highlight"><pre><span class="nt">&lt;table&gt;</span>
<span class="nt">&lt;colgroup&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;col</span> <span class="na">width=</span><span class="s">&quot;14%&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/colgroup&gt;</span>
<span class="nt">&lt;thead&gt;</span>
<span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;th</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>name<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>id<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>parent_id<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>code<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>type<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>demo<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>home<span class="nt">&lt;/p&gt;&lt;/th&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/thead&gt;</span>
<span class="nt">&lt;tbody&gt;</span>
<span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">&quot;odd&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Crestwood ES<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64985<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02205<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Fremont MS<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>65088<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02308<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Fyfe ES<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>65020<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02240<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Gibson (Robert) MS<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>65090<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02310<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Hollingsworth ES<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>65053<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02273<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>Lake ES<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>65017<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02237<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">&quot;left&quot;</span><span class="nt">&gt;&lt;p&gt;</span>McWilliams ES<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64998<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>64827<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>02218<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>B<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>FALSE<span class="nt">&lt;/p&gt;&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>

In order to query arbitrary sets of schools we must generate a collection hash

``` {.code .r .literal-block}
getOrgCollnHash <span class="nt">&lt;-</span> <span class="err">function(ids,</span> <span class="err">hdr,</span> <span class="na">vb =</span> <span class="s">FALSE)</span> <span class="err">{</span>
    <span class="na">r =</span> <span class="s">dynCurlReader()</span>
    <span class="err">ids</span> <span class="err">&lt;-</span> <span class="err">paste0(&quot;=&quot;,</span> <span class="err">paste(ids,</span> <span class="na">collapse =</span> <span class="s">&quot;,&quot;</span><span class="err">))</span>
    <span class="err">curlPerform(</span><span class="na">postfields =</span> <span class="s">ids,</span> <span class="na">url =</span> <span class="s">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/OrganizationCollectionHash&quot;</span><span class="err">,</span>
        <span class="na">verbose =</span> <span class="s">vb,</span> <span class="na">.opts =</span> <span class="s">(httpheader</span> <span class="err">=</span> <span class="err">hdr),</span> <span class="na">post =</span> <span class="s">1L,</span>
        <span class="na">writefunction =</span> <span class="s">r$update)</span>
    <span class="err">paste0(&quot;c&quot;,</span> <span class="err">r$value())</span>
<span class="err">}</span>
</pre></div>


<p>We run this function against our targeted schools and collect the hash for future use:</p>
<p>``` {.code .r .literal-block}
csv_header &lt;- c("Cookie: sid=BCEA0A1BA4249DF33EC03E7A0269DE101FC829462BD8EE8CEBDDF0C46FC9AFFDBD6C1F56D896E3296DEDD9ECE4CFB1E633EBD9D850D7A68126D9B7264653E8CC282DD2CAB5D364513DCF3E71D4481FF3E5D937BFE72E31A1EBECC6733E798322E34B4838A4265E34D3449D6EEFB52C7C24EED7E6484621603BC2F488B1E8C7AC",
    "Accept-Language: en-US,en;q=0.8", "User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36")
rg &lt;- getOrgCollnHash(da.DT$id, csv_header)
rg</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;c4939&quot;
</pre></div>


<h4>Accessing the CSV API</h4>
<p>Inspection of the URL used to download the CRT scores for another group shows:</p>
<p>``` {.code .r .literal-block}
getFormParams("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/summaryCSV?report=summary_1&amp;organization=c2272&amp;scope=e5.g3.y10&amp;scores=N_MA,MA_pass,MA_AMO,MA_level,N_RD,RD_pass,RD_AMO,RD_level")</p>
<div class="highlight"><pre>``` {.literal-block}
##                                                      report
##                                                 &quot;summary_1&quot;
##                                                organization
##                                                     &quot;c2272&quot;
##                                                       scope
##                                                 &quot;e5.g3.y10&quot;
##                                                      scores
## &quot;N_MA,MA_pass,MA_AMO,MA_level,N_RD,RD_pass,RD_AMO,RD_level&quot;
</pre></div>


<p>The <code>organization</code> parameter is the hash generated by <code>getOrgCollnHash()</code>. The <code>scope</code> is constructed from:</p>
<ol>
<li><code>en</code>, where <em>n</em> is 1, 2, 5, or 6,</li>
<li><code>gn</code>, where <em>n</em> is grade number,</li>
<li><code>yn</code>, where <em>n</em> is year post-NCLB, ranging from 1 (2003) to 10 (2012)</li>
</ol>
<p>(These variables, and others, can also be described programmatically via the API)</p>
<p>The set of scores available for each test vary, and will need to be specified for each exam. We hard code them in our retrieval function, but these can easily be edited to narrow the query to specific variables.</p>
<ol>
<li><code>e1</code>, years 3:10; grades 3:8; CRT</li>
<li><code>e2</code>, year 3:10; grade 11; High School Proficiency Exam</li>
<li><code>e5</code>, years 3:10, grades 3:8, 11;NAA</li>
<li><code>e6</code>, years 3:7; grades 3,5; Writing</li>
</ol>
<p>We’ll retrieve each table with the following function:</p>
<p>``` {.code .r .literal-block}
getDiCSV &lt;- function(org, scope, exam, header, ethnicity = FALSE,
    gender = FALSE, iep = FALSE, frl = FALSE, filterdata = NULL,
    rel = "and") {
    # report parameter
    org &lt;- getOrgCollnHash(org, header)
    # scores parameter
    score &lt;- list(e1 = "N_MA,MA_SS,MA_pass,MA_AMO,MA_level,N_RD,RD_SS,RD_pass,RD_AMO,RD_level",
        e2 = "N_MA,MA_SS,MA_pass,MA_AMO,MA_level,N_RD,RD_SS,RD_pass,RD_AMO,RD_level,N_SC,SC_SS,SC_pass,SC_AMO,SC_level,N_WR,WR_pass,WR_AMO,WR_level",
        e5 = "N_MA,MA_pass,MA_AMO,MA_level,N_RD,RD_pass,RD_AMO,RD_level",
        e6 = "N_WR,WR_pass,WR_AMO,WR_level")
    target &lt;- paste0("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/summaryCSV?report=summary_1&amp;organization=",
        org, "&amp;scope=", scope, "&amp;scores=", score[[exam]])</p>
<div class="highlight"><pre><span class="err">#</span> <span class="nx">inelegant</span> <span class="nx">disaggregation</span> <span class="nx">selection</span>
<span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="s2">&quot;&quot;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">ethnicity</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;ethnicity,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">gender</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;gender,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">iep</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;iep,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">frl</span> <span class="o">==</span> <span class="nx">TRUE</span><span class="p">)</span>
    <span class="nx">subgroup</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;frl,&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">)</span>

<span class="err">#</span> <span class="k">if</span> <span class="nx">any</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">above</span><span class="p">,</span> <span class="nx">concatenate</span> <span class="kd">with</span> <span class="nx">target</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">subgroup</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">target</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;&amp;subgroups=&quot;</span><span class="p">,</span> <span class="nx">sub</span><span class="p">(</span><span class="s2">&quot;,$&quot;</span><span class="p">,</span>
        <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">),</span> <span class="s2">&quot;&amp;filterrelation=and&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="err">#</span> <span class="nx">filtering</span> <span class="nx">on</span> <span class="nx">subpopulation</span><span class="p">,</span> <span class="nx">but</span> <span class="nx">by</span> <span class="nx">passing</span> <span class="nx">a</span> <span class="nx">string</span>
<span class="err">#</span> <span class="nx">argument</span> <span class="nx">instead</span> <span class="k">if</span> <span class="nx">present</span><span class="p">,</span> <span class="nx">subgroups</span> <span class="nx">above</span> <span class="nx">are</span>
<span class="err">#</span> <span class="nx">ignored</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">is</span><span class="p">.</span><span class="nx">character</span><span class="p">(</span><span class="nx">filterdata</span><span class="p">))</span> <span class="p">{</span>

    <span class="err">#</span> <span class="nx">convert</span> <span class="p">.</span>  <span class="nx">getFilterKeys</span> <span class="o">&lt;-</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filterdatum</span><span class="p">)</span> <span class="p">{</span> <span class="p">.</span>
    <span class="err">#</span> <span class="err">#</span> <span class="nx">split</span> <span class="nx">and</span> <span class="nx">combine</span> <span class="p">.</span>  <span class="nx">filterkey</span> <span class="o">&lt;-</span>
    <span class="err">#</span> <span class="nx">strsplit</span><span class="p">(</span><span class="nx">filterdatum</span><span class="p">,</span> <span class="nx">split</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">.</span>  <span class="nx">paste</span><span class="p">(</span><span class="nx">filterkey</span><span class="p">,</span>
    <span class="err">#</span> <span class="nx">collapse</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="p">.</span>  <span class="p">}</span>
    <span class="nx">filterkeys</span> <span class="o">&lt;-</span> <span class="nx">gsub</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="nx">filterdata</span><span class="p">,</span> <span class="nx">exact</span> <span class="o">=</span> <span class="nx">TRUE</span><span class="p">)</span>

    <span class="nx">target</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;&amp;filterkey=&quot;</span><span class="p">,</span> <span class="nx">filterkeys</span><span class="p">,</span>
        <span class="s2">&quot;&amp;filterdata=&quot;</span><span class="p">,</span> <span class="nx">filterdata</span><span class="p">,</span> <span class="s2">&quot;&amp;filterrelation=&quot;</span><span class="p">,</span>
        <span class="nx">rel</span><span class="p">)</span>
<span class="p">}</span>
<span class="err">#</span> <span class="nx">target</span> <span class="nx">make</span> <span class="nx">it</span> <span class="nx">so</span>
<span class="nx">resultsText</span> <span class="o">&lt;-</span> <span class="nx">getURL</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span>

<span class="err">#</span> <span class="nx">create</span> <span class="nx">temporary</span> <span class="nx">connection</span> <span class="nx">from</span> <span class="nx">results</span> <span class="nx">and</span> <span class="k">return</span>
<span class="err">#</span> <span class="nx">data</span><span class="p">.</span><span class="nx">table</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">read</span><span class="p">.</span><span class="nx">csv</span><span class="p">(</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">resultsText</span><span class="p">))</span>
</pre></div>


<p>}</p>
<div class="highlight"><pre>Now we’ll download the results of the Criterion Referenced Test <span class="p">(</span>exam <span class="sb">`e1`</span><span class="p">)</span> <span class="kr">for</span> Grade <span class="m">3</span> <span class="p">(</span><span class="sb">`g3`</span><span class="p">),</span> and years <span class="m">2007</span> <span class="p">(</span><span class="sb">`y3`</span><span class="p">)</span> through <span class="m">2012</span> <span class="p">(</span><span class="sb">`y10`</span><span class="p">)</span><span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
scopestr <span class="o">&lt;-</span> <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;e1&quot;</span><span class="p">,</span> <span class="s">&quot;g3&quot;</span><span class="p">,</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">10</span><span class="p">)),</span> collapse <span class="o">=</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
da.crt.g3 <span class="o">&lt;-</span> getDiCSV<span class="p">(</span>da.DT<span class="o">$</span>id<span class="p">,</span> scopestr<span class="p">,</span> <span class="s">&quot;e1&quot;</span><span class="p">,</span> csv_header<span class="p">)</span>
</pre></div>


<p>Printing the first six rows:</p>
<table>
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><p>Group</p>
<p>Year</p>
<p>Grade</p>
<p>Number.Enrolled</p>
<p>Mathematics…Number.Tested</p>
<p>Mathematics…Mean.Scale.Score</p>
<p>Mathematics…..Proficient</p>
<p>Mathematics…..Above.AMO</p>
<p>Mathematics…Emergent.Developing</p>
<p>Mathematics…Approaches.Standard</p>
<p>Mathematics…Meets.Standard</p>
<p>Mathematics…Exceeds.Standard</p>
<p>Reading…Number.Tested</p>
<p>Reading…Mean.Scale.Score</p>
<p>Reading…..Proficient</p>
<p>Reading…..Above.AMO</p>
<p>Reading…Emergent.Developing</p>
<p>Reading…Approaches.Standard</p>
<p>Reading…Meets.Standard</p>
<p>Reading…Exceeds.Standard</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>Crestwood ES</p>
<p>2007-2008</p>
<p>3</p>
<p>126</p>
<p>126</p>
<p>316.8</p>
<p>64.3</p>
<p>8.0</p>
<p>7.1</p>
<p>28.6</p>
<p>35.7</p>
<p>28.6</p>
<p>126</p>
<p>298.0</p>
<p>54.0</p>
<p>2.3</p>
<p>8.7</p>
<p>37.3</p>
<p>29.4</p>
<p>24.6</p></td>
<td align="left"><p>Crestwood ES</p>
<p>2008-2009</p>
<p>3</p>
<p>114</p>
<p>114</p>
<p>312.0</p>
<p>52.6</p>
<p>-3.7</p>
<p>6.1</p>
<p>41.2</p>
<p>23.7</p>
<p>28.9</p>
<p>114</p>
<p>302.4</p>
<p>57.0</p>
<p>5.3</p>
<p>4.4</p>
<p>38.6</p>
<p>40.4</p>
<p>16.7</p></td>
<td align="left"><p>Crestwood ES</p>
<p>2009-2010</p>
<p>3</p>
<p>108</p>
<p>108</p>
<p>305.0</p>
<p>53.7</p>
<p>-12.2</p>
<p>16.7</p>
<p>29.6</p>
<p>32.4</p>
<p>21.3</p>
<p>108</p>
<p>296.1</p>
<p>50.0</p>
<p>-13.8</p>
<p>4.6</p>
<p>45.4</p>
<p>34.3</p>
<p>15.7</p></td>
<td align="left"><p>Crestwood ES</p>
<p>2010-2011</p>
<p>3</p>
<p>112</p>
<p>112</p>
<p>345.1</p>
<p>80.4</p>
<p>14.5</p>
<p>9.8</p>
<p>9.8</p>
<p>37.5</p>
<p>42.9</p>
<p>112</p>
<p>301.0</p>
<p>57.1</p>
<p>-6.7</p>
<p>25.0</p>
<p>17.9</p>
<p>36.6</p>
<p>20.5</p></td>
<td align="left"><p>Crestwood ES</p>
<p>2011-2012</p>
<p>3</p>
<p>120</p>
<p>120</p>
<p>322.4</p>
<p>70.8</p>
<p>-2.7</p>
<p>8.3</p>
<p>20.8</p>
<p>42.5</p>
<p>28.3</p>
<p>120</p>
<p>294.1</p>
<p>48.3</p>
<p>-17.5</p>
<p>20.8</p>
<p>30.8</p>
<p>34.2</p>
<p>14.2</p></td>
<td align="left"><p>Crestwood ES</p>
<p>2012-2013</p>
<p>3</p>
<p>104</p>
<p>104</p>
<p>314.3</p>
<p>57.7</p>
<p>-13.9</p>
<p>14.4</p>
<p>27.9</p>
<p>29.8</p>
<p>27.9</p>
<p>104</p>
<p>289.0</p>
<p>41.3</p>
<p>-26.1</p>
<p>30.8</p>
<p>27.9</p>
<p>24.0</p>
<p>17.3</p></td>
</tr>
</tbody>
</table>

<p>Try again, but this time dis-aggregate based upon ethnicity:</p>
<p>``` {.code .r .literal-block}
da.crt.g3.e &lt;- getDiCSV(da.DT$id, scopestr, "e1", csv_header,
    ethnicity = TRUE)</p>
<div class="highlight"><pre>The first six rows<span class="o">:</span>

Group

Year

Grade

Number.Enrolled

Mathematics…Number.Tested

Mathematics…Mean.Scale.Score

Mathematics…<span class="m">..</span>Proficient

Mathematics…<span class="m">..</span>Above.AMO

Mathematics…Emergent.Developing

Mathematics…Approaches.Standard

Mathematics…Meets.Standard

Mathematics…Exceeds.Standard

Reading…Number.Tested

Reading…Mean.Scale.Score

Reading…<span class="m">..</span>Proficient

Reading…<span class="m">..</span>Above.AMO

Reading…Emergent.Developing

Reading…Approaches.Standard

Reading…Meets.Standard

Reading…Exceeds.Standard

Crestwood ES

<span class="m">2007-2008</span>

<span class="m">3</span>

<span class="m">126</span>

<span class="m">126</span>

<span class="m">316.8</span>

<span class="m">64.3</span>

<span class="m">8.0</span>

<span class="m">7.1</span>

<span class="m">28.6</span>

<span class="m">35.7</span>

<span class="m">28.6</span>

<span class="m">126</span>

<span class="m">298.0</span>

<span class="m">54.0</span>

<span class="m">2.3</span>

<span class="m">8.7</span>

<span class="m">37.3</span>

<span class="m">29.4</span>

<span class="m">24.6</span>

Black

<span class="m">2007-2008</span>

<span class="m">3</span>

<span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   Hispanic

                                                                    <span class="m">2007-2008</span>

                                                                    <span class="m">3</span>

                                                                    <span class="m">105</span>

                                                                    <span class="m">105</span>

                                                                    <span class="m">312.8</span>

                                                                    <span class="m">61.9</span>

                                                                    <span class="m">5.6</span>

                                                                    <span class="m">7.6</span>

                                                                    <span class="m">30.5</span>

                                                                    <span class="m">38.1</span>

                                                                    <span class="m">23.8</span>

                                                                    <span class="m">105</span>

                                                                    <span class="m">292.4</span>

                                                                    <span class="m">50.5</span>

                                                                    <span class="m">-1.2</span>

                                                                    <span class="m">9.5</span>

                                                                    <span class="m">40.0</span>

                                                                    <span class="m">29.5</span>

                                                                    <span class="m">21.0</span>

                                                                    White

                                                                    <span class="m">2007-2008</span>

                                                                    <span class="m">3</span>

                                                                    <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   Asian

                                                                                                                                        <span class="m">2007-2008</span>

                                                                                                                                        <span class="m">3</span>

                                                                                                                                        <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   <span class="o">-</span>   Crestwood ES

                                                                                                                                                                                                            <span class="m">2008-2009</span>

                                                                                                                                                                                                            <span class="m">3</span>

                                                                                                                                                                                                            <span class="m">114</span>

                                                                                                                                                                                                            <span class="m">114</span>

                                                                                                                                                                                                            <span class="m">312.0</span>

                                                                                                                                                                                                            <span class="m">52.6</span>

                                                                                                                                                                                                            <span class="m">-3.7</span>

                                                                                                                                                                                                            <span class="m">6.1</span>

                                                                                                                                                                                                            <span class="m">41.2</span>

                                                                                                                                                                                                            <span class="m">23.7</span>

                                                                                                                                                                                                            <span class="m">28.9</span>

                                                                                                                                                                                                            <span class="m">114</span>

                                                                                                                                                                                                            <span class="m">302.4</span>

                                                                                                                                                                                                            <span class="m">57.0</span>

                                                                                                                                                                                                            <span class="m">5.3</span>

                                                                                                                                                                                                            <span class="m">4.4</span>

                                                                                                                                                                                                            <span class="m">38.6</span>

                                                                                                                                                                                                            <span class="m">40.4</span>

                                                                                                                                                                                                            <span class="m">16.7</span>

As we can see<span class="p">,</span> dis<span class="o">-</span>aggregation has its pitfalls<span class="o">:</span> test results are suppressed <span class="kr">for</span> any group where <span class="o">*</span>n<span class="o">*</span> ≤ <span class="m">20</span>

From here<span class="p">,</span> one can filter <span class="kr">for</span> complete cases<span class="p">,</span> reshape data<span class="p">,</span> <span class="kp">tabulate</span><span class="p">,</span> etc. Next<span class="p">,</span> an overview of the non<span class="o">-</span>assessment data on NRC.

<span class="c1">### Getting NRC data</span>

<span class="c1">#### Accessing demographic and profile data</span>

Test scores alone are of limited value. Additional context is provided by several addditional datasets on NRC.

<span class="c1">##### Adequate Yearly Progress</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
all.ccsd.ayp.csv.txt <span class="o">&lt;-</span> getURL<span class="p">(</span><span class="s">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5376&amp;scope=e13.y1.y2.y3.y4.y5.y6.y7.y8.y9&amp;scores=852,853,854&quot;</span><span class="p">)</span>
ccsd.ayp.DT <span class="o">&lt;-</span> data.table<span class="p">(</span>read.csv<span class="p">(</span>text <span class="o">=</span> all.ccsd.ayp.csv.txt<span class="p">))</span>
</pre></div>


<h5>Demographics</h5>
<p>Download all count and percentage demographic data:</p>
<p>``` {.code .r .literal-block}
all.ccsd.demo.csv.txt &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e7.y1.y10.y2.y4.y5.y6.y7.y8.y9&amp;scores=1026,566,567,568,569,570,571,572,573,574,575,805,576,577,806,586,587,588,589,578,579,580,581,582,583,584,585")
ccsd.demo.DT &lt;- data.table(read.csv(text = all.ccsd.demo.csv.txt))</p>
<div class="highlight"><pre><span class="c1">##### Personnel</span>

Download all personnel data <span class="p">(</span>e.g.<span class="p">,</span> % of highly qualified teachers<span class="p">)</span><span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
all.ccsd.pers.csv.txt <span class="o">&lt;-</span> getURL<span class="p">(</span><span class="s">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e12.y1.y10.y2.y4.y5.y6.y7.y8.y9&amp;scores=779,780,781,782,851,783,784,785,786,787,788,789,790,791,792,793,795,796,1029,797,798,799,800,801,802,803,760,761,762,856,763,765,767,769,771,764,766,768,770,772,775,773,777,776,774,778&quot;</span><span class="p">)</span>
ccsd.pers.DT <span class="o">&lt;-</span> data.table<span class="p">(</span>read.csv<span class="p">(</span>text <span class="o">=</span> all.ccsd.pers.csv.txt<span class="p">))</span>
</pre></div>


<h5>Technology</h5>
<p>Download all Technology data:</p>
<p>``` {.code .r .literal-block}
ccsd.tech2011.csv &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e17.y1.y2.y3.y4.y5.y6&amp;scores=590,591,592,593,594,595")
ccsd.tech2012.csv &lt;- getURL("http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/rosterCSV?report=reportcard_1&amp;organization=c5195&amp;scope=e8.y10.y7&amp;scores=809,810,811,812,813,814,815")
ccsd.tech.DT &lt;- data.table(rbind.fill(read.csv(text = ccsd.tech2011.csv),
    read.csv(text = ccsd.tech2012.csv)))</p>
<div class="highlight"><pre><span class="err">####</span> <span class="nx">Historical</span> <span class="nx">profiles</span>

<span class="nx">Historical</span> <span class="nx">profiles</span> <span class="nx">are</span> <span class="nx">analogous</span> <span class="nx">to</span> <span class="nx">metadata</span> <span class="k">for</span> <span class="nx">each</span> <span class="nx">school</span> <span class="nx">year</span><span class="p">.</span> <span class="nx">These</span> <span class="nx">include</span> <span class="nx">the</span> <span class="nx">name</span> <span class="nx">of</span> <span class="nx">each</span> <span class="nx">school</span><span class="err">’</span><span class="nx">s</span> <span class="nx">principal</span><span class="p">,</span> <span class="nx">addresses</span><span class="p">,</span> <span class="nx">phone</span> <span class="nx">numbers</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">names</span> <span class="nx">of</span> <span class="nx">school</span> <span class="nx">board</span> <span class="nx">members</span> <span class="nx">and</span> <span class="nx">more</span><span class="p">.</span> <span class="nx">Also</span> <span class="nx">included</span> <span class="nx">are</span> <span class="nx">goals</span><span class="p">,</span> <span class="nx">such</span> <span class="nx">as</span> <span class="nx">the</span> <span class="s2">&quot;percent</span><span class="cp">[</span><span class="nx">age</span><span class="cp">]</span><span class="s2"> of non-proficient math students in the Class of 2006 will be reduced by at least 50%.&quot;</span> <span class="p">(</span><span class="cp">[</span><span class="nx">Advanced</span> <span class="nx">Technologies</span> <span class="nx">Academy</span><span class="cp">]</span><span class="p">(</span><span class="nx">http</span><span class="o">:</span><span class="c1">//www.atech.org/), 2005)</span>

<span class="err">```</span> <span class="p">{.</span><span class="nx">code</span> <span class="p">.</span><span class="nx">r</span> <span class="p">.</span><span class="nx">literal</span><span class="o">-</span><span class="nx">block</span><span class="p">}</span>
<span class="nx">getProfiles</span> <span class="o">&lt;-</span> <span class="kd">function</span><span class="p">(</span><span class="nx">org</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">years</span> <span class="o">&lt;-</span> <span class="nx">paste0</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">)</span>

    <span class="err">#</span> <span class="nx">Create</span> <span class="nx">a</span> <span class="nx">list</span> <span class="nx">of</span> <span class="nx">lists</span> <span class="nx">containing</span> <span class="nx">searches</span> <span class="k">for</span> <span class="nx">each</span>
    <span class="err">#</span> <span class="nx">year</span>
    <span class="nx">searches</span> <span class="o">&lt;-</span> <span class="nx">lapply</span><span class="p">(</span><span class="nx">years</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nx">structure</span><span class="p">(</span><span class="nx">c</span><span class="p">(</span><span class="s2">&quot;profile_1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">org</span><span class="p">),</span> <span class="p">.</span><span class="nx">Names</span> <span class="o">=</span> <span class="nx">c</span><span class="p">(</span><span class="s2">&quot;report&quot;</span><span class="p">,</span> <span class="s2">&quot;reportID&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">,</span> <span class="s2">&quot;organization&quot;</span><span class="p">)))</span>
    <span class="nx">prof</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">lst</span> <span class="o">&lt;-</span> <span class="nx">lapply</span><span class="p">(</span><span class="nx">searches</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">search</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">getForm</span><span class="p">(</span><span class="s2">&quot;http://www.nevadareportcard.com/DIWAPI-NVReportCard/api/Profile&quot;</span><span class="p">,</span>
            <span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">search</span><span class="p">,</span> <span class="p">.</span><span class="nx">opts</span> <span class="o">=</span> <span class="p">(</span><span class="nx">httpheader</span> <span class="o">=</span> <span class="s2">&quot;Accept: application/json, text/javascript, */*; q=0.01&quot;</span><span class="p">))</span>
    <span class="p">})</span>
    <span class="nx">prof</span><span class="p">.</span><span class="nx">list</span> <span class="o">&lt;-</span> <span class="nx">lapply</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">lst</span><span class="p">,</span> <span class="nx">fromJSON</span><span class="p">)</span>
    <span class="nx">names</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">list</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nx">years</span>
    <span class="nx">prof</span><span class="p">.</span><span class="nx">list</span>
<span class="p">}</span>
</pre></div>


<h3>Example</h3>
<p>This is already far too long, but I want to shoehorn in a few applications. We’ll download the profiles of Valley High School, one of our DA schools:</p>
<p>``` {.code .r .literal-block}
valley.prof.list &lt;- getProfiles(da.DT["Valley HS"]$id)</p>
<div class="highlight"><pre><span class="err">####</span> <span class="nx">Principal</span> <span class="nx">turnover</span>

<span class="nx">How</span> <span class="nx">many</span> <span class="nx">principals</span> <span class="nx">has</span> <span class="nx">Valley</span> <span class="nx">had</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">last</span> <span class="nx">decade</span><span class="o">?</span>

<span class="err">```</span> <span class="p">{.</span><span class="nx">code</span> <span class="p">.</span><span class="nx">r</span> <span class="p">.</span><span class="nx">literal</span><span class="o">-</span><span class="nx">block</span><span class="p">}</span>
<span class="err">#</span> <span class="nx">Finding</span> <span class="nx">principals</span>
<span class="nx">table</span><span class="p">(</span><span class="nx">sapply</span><span class="p">(</span><span class="nx">valley</span><span class="p">.</span><span class="nx">prof</span><span class="p">.</span><span class="nx">list</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nx">x$superintendent</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>##
## Deann R. Burnett, Principal      Ron Montoya, Principal
##                           2                           8
</pre></div>


<h4>Geocoding</h4>
<p>We can geocode Valley’s address:</p>
<p>``` {.code .r .literal-block}</p>
<h1>Geocoding</h1>
<p>valley.address &lt;- paste(valley.prof.list$y1$address, valley.prof.list$y1$zip)
valley.address</p>
<div class="highlight"><pre>``` {.literal-block}
## [1] &quot;2839 S Burnham Ave 89109&quot;
</pre></div>


<p>``` {.code .r .literal-block}
valley.latlong &lt;- geocode(valley.address)</p>
<div class="highlight"><pre>then map the surrounding area<span class="o">:</span>

<span class="sb">``</span>` <span class="p">{</span><span class="m">.</span>code <span class="m">.</span>r <span class="m">.</span>literal<span class="o">-</span>block<span class="p">}</span>
sta <span class="o">&lt;-</span> get_map<span class="p">(</span>location <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>lon <span class="o">=</span> valley.latlong<span class="o">$</span>lon<span class="p">,</span> lat <span class="o">=</span> valley.latlong<span class="o">$</span>lat<span class="p">),</span>
    zoom <span class="o">=</span> <span class="m">15</span><span class="p">,</span> crop <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kn">source</span> <span class="o">=</span> <span class="s">&quot;stamen&quot;</span><span class="p">)</span>
ggmap<span class="p">(</span>sta<span class="p">)</span>
</pre></div>


<p><img alt="Area near Valley HS" src="figure/toyExample-os.png" /></p>
<p>Area near Valley HS</p>
<p>System Message: WARNING/2 (<code>/home/james/btsync/projects/pelican/content/nv-report-card-data.rst</code>, line 6207)</p>
<p>Explicit markup ends without a blank line; unexpected unindent.</p>
<h4>Other data sources</h4>
<p>What crimes have been reported within a one mile radius since 28 August 2013?</p>
<p>``` {.code .r .literal-block}
crimes &lt;- getURL("http://www.crimemapping.com/GetIncidents.aspx?db=8/28/2013+00:00:00&amp;de=2/03/2014+23:59:00&amp;ccs=AR,AS,BU,DP,DR,DU,FR,HO,VT,RO,SX,TH,VA,VB,WE&amp;add=2839%20Burnham%20Ave%2C%20Las%20Vegas%2C%20Nevada%2C%2089169&amp;bcy=4319584.042143912&amp;bcx=-12815448.676366305&amp;br=1.0&amp;xmin=-12818038.894702934&amp;ymin=4318442.044425546&amp;xmax=-12813524.33271972&amp;ymax=4321389.647328871")</p>
<p>crimes &lt;- fromJSON(crimes)</p>
<p>table(sapply(crimes$incidents, function(x) x$CrimeCode))</p>
<div class="highlight"><pre>``` {.literal-block}
##
##              Assault             Burglary Disturbing the Peace
##                   41                  152                  153
##  Motor Vehicle Theft              Robbery           Sex Crimes
##                   79                   21                    1
##        Theft/Larceny            Vandalism              Weapons
##                    1                   50                    7
</pre></div>


<p>We can also get additional data about the people who live there:</p>
<p>``` {.code .r .literal-block}
dsk &lt;- getURL("http://www.datasciencetoolkit.org/coordinates2statistics/36.13727%2c-115.1217")
dsk &lt;- fromJSON(dsk)</p>
<div class="highlight"><pre><span class="x">``` </span><span class="err">{</span><span class="x">.code .r .literal-block}</span>
<span class="x">dsk[[1]]</span><span class="p">$</span><span class="nv">statistics</span><span class="p">$</span><span class="nv">us_population_poverty</span><span class="x"></span>
</pre></div>


<div class="highlight"><pre><span class="cp">##</span><span class="c"> $description</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;The proportion of residents whose income is below the poverty level&quot;</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $value</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 0.1067</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $proportion_of</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 1818</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $source_name</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;US Census and the CGIAR Consortium for Spatial Information&quot;</span><span class="x"></span>
</pre></div>


<p>``` {.code .r .literal-block}
dsk[[1]]$statistics$us_population_low_income</p>
<div class="highlight"><pre><span class="x">``` </span><span class="err">{</span><span class="x">.literal-block}</span>
<span class="cp">##</span><span class="c"> $description</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;The proportion of residents who earn less than twice the poverty level&quot;</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $value</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 0.2536</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $proportion_of</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 1818</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $source_name</span><span class="x"></span>
<span class="cp">##</span><span class="c"> NULL</span><span class="x"></span>
</pre></div>


<p>``` {.code .r .literal-block}
dsk[[1]]$statistics$us_households_single_mothers</p>
<div class="highlight"><pre><span class="x">``` </span><span class="err">{</span><span class="x">.literal-block}</span>
<span class="cp">##</span><span class="c"> $description</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;The proportion of households with a female householder, no husband, and one or more children under eighteen.&quot;</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $value</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 0.07375</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $proportion_of</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 678</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $source_name</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;US Census and the CGIAR Consortium for Spatial Information&quot;</span><span class="x"></span>
</pre></div>


<p>``` {.code .r .literal-block}
dsk[[1]]$statistics$us_sample_area</p>
<div class="highlight"><pre><span class="x">``` </span><span class="err">{</span><span class="x">.literal-block}</span>
<span class="cp">##</span><span class="c"> $description</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;The total area of the grid cell US Census samples were calculated on.&quot;</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $value</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] 693096</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $units</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;square meters&quot;</span><span class="x"></span>
<span class="cp">##</span><span class="x"></span>
<span class="cp">##</span><span class="c"> $source_name</span><span class="x"></span>
<span class="cp">##</span><span class="c"> [1] &quot;US Census and the CGIAR Consortium for Spatial Information&quot;</span><span class="x"></span>
</pre></div>


<p>``` {.code .r .literal-block}
save.image(file = "nv-report-card-data.RData", ascii = TRUE)
sessionInfo()</p>
<div class="highlight"><pre>``` {.literal-block}
## R version 3.0.2 (2013-09-25)
## Platform: i686-pc-linux-gnu (32-bit)
##
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
##
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base
##
## other attached packages:
## [1] ggmap_2.3         ggplot2_0.9.3.1   stringr_0.6.2     data.table_1.8.10
## [5] plyr_1.8          RJSONIO_1.0-3     RCurl_1.95-4.1    bitops_1.0-6
## [9] knitr_1.5
##
## loaded via a namespace (and not attached):
##  [1] colorspace_1.2-4    dichromat_2.0-0     digest_0.6.4
##  [4] evaluate_0.5.1      formatR_0.10        grid_3.0.2
##  [7] gtable_0.1.2        labeling_0.2        mapproj_1.2-2
## [10] maps_2.3-6          MASS_7.3-29         munsell_0.4.2
## [13] png_0.1-7           proto_0.3-10        RColorBrewer_1.0-5
## [16] reshape2_1.2.2      RgoogleMaps_1.2.0.5 rjson_0.2.13
## [19] scales_0.2.3        tools_3.0.2
</pre></div>
<footer class="post-info">
  <p>Tags: 
    <a href="/tag/r.html">[R</a>
    <a href="/tag/web-scraping.html">web scraping</a>
    <a href="/tag/cflv.html">cflv</a>
    <a href="/tag/civic-hacking.html">civic hacking</a>
    <a href="/tag/education.html">education]</a>
  </p>

</footer><!-- /.post-info -->    </div><!-- /.entry-content -->

  </article>
</section>
        <div class="clear-footer"></div>
    </div>
    <footer id="contentinfo" class="body">
        <div class="social">
            <a href="mailto:james@jamesestevez.com" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <a href="https://github.com/james-estevez" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <a href="https://twitter.com/jstvz" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x dat-icon"></i>
                </span>
            </a>
        </div>
        <p>
            ©2013 James Estevez
            <br/>Built with <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>.
        </p>
    </footer>

</body>
</html>